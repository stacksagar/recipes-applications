const autoWriteDOM = document.querySelectorAll('.autoWrite');
const autoWriteWords = [];
const autoWriteSpeed = [];
const autoWriteWait = [];
const breakDOM = document.querySelectorAll('.autoWriteBreak');
const breakWords = [];
const breakSpeed = [];
const breakWait = [];

class autoWrite {
	constructor(output, words, speed, wait) {
		this.output = output;
		this.words = words;
		this.speed = speed;
		this.wait = wait;
		this.wordsIndex = 0;
		this.outputText = '';
		this.isDeleting = false;
		this.typing();
	}
	typing() {
		this.currentIndex = this.wordsIndex % this.words.length;
		this.wordsText = this.words[this.currentIndex];
		if (this.isDeleting) {
			this.outputText = this.wordsText.slice(0, this.outputText.length - 1);
		} else {
			this.outputText = this.wordsText.slice(0, this.outputText.length + 1);
		}
		let speed = this.speed;
		if (this.outputText === this.wordsText) {
			this.isDeleting = true;
			speed = this.wait;
		} else if (this.outputText === '') {
			this.isDeleting = false;
			this.wordsIndex++;
			speed = this.speed;
		}
		this.output.innerHTML = this.outputText;
		setTimeout(() => this.typing(), speed);
	}
}

typingAction(breakDOM, breakWords, breakSpeed, breakWait, null);
typingAction(autoWriteDOM, autoWriteWords, autoWriteSpeed, autoWriteWait, ',');
function typingAction(first, second, third, fourth, makeArray) {
	first.forEach((item, index) => {
		second.push(item.innerHTML.split(makeArray));
		third.push(item.classList[1]);
		fourth.push(item.classList[2] !== undefined ? item.classList[2] : 99999999);
		new autoWrite(item, second[index], third[index], fourth[index]);
	});
}
 
const border = 'border-right: 3px solid #999;padding-right:2px;';
breakDOM.forEach((item, i) => {
	item.setAttribute('style', border);
	setTimeout(() => {
		item.removeAttribute('style');
	}, breakSpeed[i] * breakWords[i].join().length + 500);
});

autoWriteDOM.forEach((item) => {
	item.setAttribute('style', border);
});
